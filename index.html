<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persischer Imperativ - Lernapp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: ltr;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            min-height: 600px;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: #666;
            font-size: 1.2em;
        }

        /* Navigation Buttons */
        .nav-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .nav-btn {
            background: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            color: #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            background: #667eea;
            color: white;
        }

        /* Menu Grid */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .menu-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            color: white;
        }

        .menu-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        .menu-card h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .menu-card p {
            font-size: 1em;
            opacity: 0.95;
        }

        /* Content Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Grammar Section */
        .grammar-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
        }

        .grammar-box h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .grammar-box p, .grammar-box ul {
            color: #333;
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .persian-text {
            direction: rtl;
            font-size: 1.3em;
            font-weight: bold;
            color: #764ba2;
        }

        /* Multiple Choice */
        .question-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 3px solid #ddd;
            padding: 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
            text-align: center;
        }

        .option-btn:hover {
            border-color: #667eea;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .option-btn.correct {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .option-btn.wrong {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        /* Next Button */
        .next-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .next-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Recipe Section */
        .recipe-container {
            direction: rtl;
            text-align: right;
        }

        .recipe-title {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .recipe-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .recipe-section h3 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .clickable-word {
            cursor: pointer;
            color: #667eea;
            font-weight: bold;
            padding: 2px 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .clickable-word:hover {
            background: #667eea;
            color: white;
        }

        .translation-popup {
            position: fixed;
            background: white;
            border: 3px solid #667eea;
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            font-size: 1.1em;
            color: #333;
            display: none;
        }

        /* Flashcards */
        .flashcard-container {
            perspective: 1000px;
            margin: 20px 0;
        }

        .flashcard {
            width: 100%;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .flashcard-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .flashcard-back {
            background: white;
            color: #667eea;
            border: 3px solid #667eea;
            transform: rotateY(180deg);
        }

        .flashcard-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .flashcard-btn {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 10px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .flashcard-btn:hover {
            background: #667eea;
            color: white;
        }

        /* Gap Fill Exercise */
        .gap-exercise {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .gap-sentence {
            font-size: 1.2em;
            margin-bottom: 15px;
            line-height: 1.8;
        }

        .gap-sentence.persian {
            direction: rtl;
            text-align: right;
        }

        .gap-input {
            display: inline-block;
            min-width: 150px;
            padding: 5px 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            font-size: 1em;
            direction: rtl;
            text-align: center;
        }

        .gap-input.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .gap-input.wrong {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .check-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .check-btn:hover {
            background: #764ba2;
            transform: scale(1.05);
        }

        /* Sentence Construction */
        .construction-area {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .target-sentence {
            background: white;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-bottom: 25px;
            border: 3px solid #667eea;
        }

        .construction-box {
            background: white;
            min-height: 80px;
            padding: 15px;
            border-radius: 15px;
            border: 3px dashed #667eea;
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
            direction: rtl;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .word-tile {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            user-select: none;
        }

        .word-tile:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
        }

        .word-tile.used {
            opacity: 0.3;
            pointer-events: none;
        }

        .word-tile.in-construction {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        /* Score Display */
        .score-display {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-weight: bold;
            color: #667eea;
            z-index: 999;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
        }

        /* Info Page */
        .info-box {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .info-box h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .info-box p {
            color: #333;
            line-height: 1.8;
            margin-bottom: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }

            .score-display {
                position: static;
                margin-bottom: 20px;
                text-align: center;
            }
        }

        .hint {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
            margin-top: 5px;
        }

        .feedback-message {
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .feedback-message.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .feedback-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
    </style>
</head>
<body>
    <div class="nav-buttons" id="navButtons">
        <button class="nav-btn" onclick="goHome()">üè† Home</button>
        <button class="nav-btn" onclick="goBack()" id="backBtn" style="display: none;">‚¨Ö Zur√ºck</button>
    </div>

    <div class="score-display" id="scoreDisplay" style="display: none;">
        Punkte: <span id="scoreValue">0</span>
    </div>

    <div class="container">
        <!-- Main Menu -->
        <div id="mainMenu" class="content-section active">
            <div class="header">
                <h1>üéØ Persischer Imperativ</h1>
                <p>Interaktive Lernapp f√ºr deutsche Lernende</p>
            </div>

            <div class="menu-grid">
                <div class="menu-card" onclick="showSection('grammar')">
                    <h2>üìö Baustein 1</h2>
                    <p>Grammatikerkl√§rung & √úbungen</p>
                </div>
                <div class="menu-card" onclick="showSection('recipe1')">
                    <h2>ü•£ Baustein 2</h2>
                    <p>Rezept: Mirza Ghasemi</p>
                </div>
                <div class="menu-card" onclick="showSection('recipe2')">
                    <h2>üçö Baustein 3</h2>
                    <p>Rezept: Adas Polo (L√ºckentext)</p>
                </div>
                <div class="menu-card" onclick="showSection('gapfill')">
                    <h2>‚úçÔ∏è Baustein 4</h2>
                    <p>L√ºckentext√ºbungen</p>
                </div>
                <div class="menu-card" onclick="showSection('construction')">
                    <h2>üß© Baustein 5</h2>
                    <p>Satzkonstruktion</p>
                </div>
                <div class="menu-card" onclick="showSection('info')">
                    <h2>‚ÑπÔ∏è Info</h2>
                    <p>√úber diese App</p>
                </div>
            </div>
        </div>

        <!-- Baustein 1: Grammar & Quiz -->
        <div id="grammar" class="content-section">
            <div class="header">
                <h1>üìö Grammatikerkl√§rung</h1>
                <p>Der Imperativ im Persischen</p>
            </div>

            <div id="grammarContent">
                <div class="grammar-box">
                    <h3>üîπ 2. Person Singular (du)</h3>
                    <p><strong>Bildung:</strong> ÿ® + Pr√§sensstamm (be- + Stamm)</p>
                    <p><strong>Beispiele:</strong></p>
                    <ul>
                        <li><span class="persian-text">ÿ®ÿ±Ÿà</span> (be-ro) = Geh! (ÿ±ŸÅÿ™ŸÜ)</li>
                        <li><span class="persian-text">ÿ®ŸÜŸà€åÿ≥</span> (be-nevis) = Schreib! (ŸÜŸàÿ¥ÿ™ŸÜ)</li>
                        <li><span class="persian-text">ÿ®ÿÆŸàÿ±</span> (be-khor) = Iss! (ÿÆŸàÿ±ÿØŸÜ)</li>
                    </ul>
                </div>

                <div class="grammar-box">
                    <h3>üîπ 2. Person Plural / H√∂flichkeitsform (Sie)</h3>
                    <p><strong>Bildung:</strong> ÿ® + Pr√§sensstamm + €åÿØ (be- + Stamm + -id)</p>
                    <p><strong>Beispiele:</strong></p>
                    <ul>
                        <li><span class="persian-text">ÿ®ÿ±Ÿà€åÿØ</span> (be-ro-id) = Gehen Sie!</li>
                        <li><span class="persian-text">ÿ®ŸÜŸà€åÿ≥€åÿØ</span> (be-nevis-id) = Schreiben Sie!</li>
                        <li><span class="persian-text">ÿ®ÿÆŸàÿ±€åÿØ</span> (be-khor-id) = Essen Sie!</li>
                    </ul>
                </div>

                <div class="grammar-box">
                    <h3>üîπ Negativer Imperativ (Verneinung)</h3>
                    <p><strong>Bildung:</strong> ŸÜ + Pr√§sensstamm (na- + Stamm) f√ºr Singular<br>
                    ŸÜ + Pr√§sensstamm + €åÿØ (na- + Stamm + -id) f√ºr Plural</p>
                    <p><strong>Beispiele:</strong></p>
                    <ul>
                        <li><span class="persian-text">ŸÜÿ±Ÿà</span> (na-ro) = Geh nicht!</li>
                        <li><span class="persian-text">ŸÜÿÆŸàÿ±</span> (na-khor) = Iss nicht!</li>
                        <li><span class="persian-text">ŸÜÿ±Ÿà€åÿØ</span> (na-ro-id) = Gehen Sie nicht!</li>
                        <li><span class="persian-text">ŸÜÿÆŸàÿ±€åÿØ</span> (na-khor-id) = Essen Sie nicht!</li>
                    </ul>
                </div>

                <div class="grammar-box">
                    <h3>üîπ Wenn das Verb mit ÿ¢ (ƒÄ) beginnt</h3>
                    <p><strong>Regel:</strong> Dann kommt €å dazwischen</p>
                    <p><strong>Beispiele:</strong></p>
                    <ul>
                        <li>ÿ¢ŸÖÿØŸÜ ‚Üí <span class="persian-text">ÿ®€åÿß</span> (be-yƒÅ) = Komm!</li>
                        <li>ÿ¢Ÿàÿ±ÿØŸÜ ‚Üí <span class="persian-text">ÿ®€åÿßŸàÿ±</span> (be-yƒÅvar) = Bring!</li>
                    </ul>
                </div>

                <div class="grammar-box">
                    <h3>üîπ Verben, bei denen das ‚Äûb" wegf√§llt</h3>
                    <p><strong>Bei manchen Verben f√§llt das b- im Imperativ ganz weg:</strong></p>
                    <ul>
                        <li>⁄©ÿ±ÿØŸÜ ‚Üí ÿ®⁄©ŸÜ / <span class="persian-text">⁄©ŸÜ</span> (be-kon / kon)</li>
                        <li>ÿ¥ÿØŸÜ ‚Üí ÿ®ÿ¥Ÿà / <span class="persian-text">ÿ¥Ÿà</span> (be-≈°o / ≈°o)</li>
                    </ul>
                    <p><strong>Beispiele:</strong></p>
                    <ul>
                        <li><span class="persian-text">⁄©ŸÜ!</span> = Mach!</li>
                        <li><span class="persian-text">ÿ¥Ÿà!</span> = Werde!</li>
                    </ul>
                </div>

                <div class="grammar-box">
                    <h3>üîπ Wichtigste Ausnahme: ÿØÿßÿ¥ÿ™ŸÜ (haben)</h3>
                    <p>‚ÄûHaben" bildet keinen normalen Imperativ, sondern benutzt ‚Äûÿ®ÿßÿ¥" (sein).</p>
                    <ul>
                        <li><span class="persian-text">ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥</span> = Hab!</li>
                        <li><span class="persian-text">ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥€åÿØ</span> = Haben Sie!</li>
                        <li><span class="persian-text">ŸÜÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥</span> = Hab nicht!</li>
                        <li><span class="persian-text">ŸÜÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥€åÿØ</span> = Haben Sie nicht!</li>
                    </ul>
                </div>

                <button class="next-btn" onclick="startQuiz()">Jetzt √ºben! üéØ</button>
            </div>

            <div id="quizContent" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgress"></div>
                </div>
                <div id="quizQuestion"></div>
            </div>
        </div>

        <!-- Baustein 2: Recipe Mirza Ghasemi -->
        <div id="recipe1" class="content-section">
            <div class="header">
                <h1>ü•£ ŸÖ€åÿ±ÿ≤ÿß ŸÇÿßÿ≥ŸÖ€å</h1>
                <p>Rezept aus dem Norden Irans</p>
            </div>

            <div class="recipe-container" id="mirzaRecipe">
                <!-- Recipe content will be added by JavaScript -->
            </div>

            <div style="margin-top: 30px;">
                <h2 style="text-align: center; color: #667eea; margin-bottom: 20px;">üìò Flashcards</h2>
                <div class="flashcard-container">
                    <div class="flashcard" id="mirzaFlashcard" onclick="flipCard('mirzaFlashcard')">
                        <div class="flashcard-face flashcard-front">
                            <span id="mirzaFront"></span>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <span id="mirzaBack"></span>
                        </div>
                    </div>
                </div>
                <div class="flashcard-controls">
                    <button class="flashcard-btn" onclick="prevCard('mirza')">‚¨Ö Zur√ºck</button>
                    <button class="flashcard-btn" onclick="flipCard('mirzaFlashcard')">üîÑ Umdrehen</button>
                    <button class="flashcard-btn" onclick="nextCard('mirza')">Weiter ‚û°</button>
                </div>
            </div>
        </div>

        <!-- Baustein 3: Recipe Adas Polo -->
        <div id="recipe2" class="content-section">
            <div class="header">
                <h1>üçö ÿπÿØÿ≥‚ÄåŸæŸÑŸà</h1>
                <p>Iranisches vegetarisches Gericht</p>
            </div>

            <div id="adasPoloExercise">
                <!-- Content will be added by JavaScript -->
            </div>

            <div style="margin-top: 30px;">
                <h2 style="text-align: center; color: #667eea; margin-bottom: 20px;">üìò Flashcards</h2>
                <div class="flashcard-container">
                    <div class="flashcard" id="adasFlashcard" onclick="flipCard('adasFlashcard')">
                        <div class="flashcard-face flashcard-front">
                            <span id="adasFront"></span>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <span id="adasBack"></span>
                        </div>
                    </div>
                </div>
                <div class="flashcard-controls">
                    <button class="flashcard-btn" onclick="prevCard('adas')">‚¨Ö Zur√ºck</button>
                    <button class="flashcard-btn" onclick="flipCard('adasFlashcard')">üîÑ Umdrehen</button>
                    <button class="flashcard-btn" onclick="nextCard('adas')">Weiter ‚û°</button>
                </div>
            </div>
        </div>

        <!-- Baustein 4: Gap Fill -->
        <div id="gapfill" class="content-section">
            <div class="header">
                <h1>‚úçÔ∏è L√ºckentext√ºbungen</h1>
                <p>F√ºlle die L√ºcken mit der richtigen Imperativform aus</p>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="gapProgress"></div>
            </div>

            <div id="gapFillContent"></div>
        </div>

        <!-- Baustein 5: Sentence Construction -->
        <div id="construction" class="content-section">
            <div class="header">
                <h1>üß© Satzkonstruktion</h1>
                <p>Konstruiere den persischen Satz</p>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="constructionProgress"></div>
            </div>

            <div id="constructionContent"></div>
        </div>

        <!-- Info Page -->
        <div id="info" class="content-section">
            <div class="header">
                <h1>‚ÑπÔ∏è Information</h1>
                <p>√úber diese Lernapp</p>
            </div>

            <div class="info-box">
                <h3>üéØ Ziel der App</h3>
                <p>Diese interaktive Anwendung wurde entwickelt, um deutschen Lernenden den Imperativ (Befehlsform) in der persischen Sprache beizubringen. Die App bietet verschiedene Lernmethoden:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Detaillierte Grammatikerkl√§rungen</li>
                    <li>Multiple-Choice-√úbungen</li>
                    <li>Authentische persische Rezepte</li>
                    <li>Interaktive Flashcards</li>
                    <li>L√ºckentext√ºbungen</li>
                    <li>Satzkonstruktionsaufgaben</li>
                </ul>
            </div>

            <div class="info-box">
                <h3>üì± Bedienung</h3>
                <p><strong>Navigation:</strong> Nutze die Home-Taste (üè†) oben rechts, um jederzeit zum Hauptmen√º zur√ºckzukehren. Die Zur√ºck-Taste (‚¨Ö) bringt dich zur vorherigen Seite.</p>
                <p><strong>Flashcards:</strong> Klicke auf die Karte, um sie umzudrehen. Nutze die Pfeiltasten, um zwischen den Karten zu wechseln.</p>
                <p><strong>√úbungen:</strong> Dein Fortschritt wird automatisch gespeichert. Du kannst jederzeit eine Pause machen und sp√§ter weitermachen.</p>
            </div>

            <div class="info-box">
                <h3>üåü Tipps zum Lernen</h3>
                <p>‚Ä¢ Beginne mit der Grammatikerkl√§rung, um die Regeln zu verstehen</p>
                <p>‚Ä¢ √úbe regelm√§√üig mit den Flashcards</p>
                <p>‚Ä¢ Die Rezepte bieten authentischen Kontext f√ºr die Imperativformen</p>
                <p>‚Ä¢ Wiederhole √úbungen, bei denen du Schwierigkeiten hattest</p>
                <p>‚Ä¢ Achte auf die Richtung: Persisch wird von rechts nach links geschrieben!</p>
            </div>

            <div class="info-box">
                <h3>üî§ Persische Schrift</h3>
                <p>Persisch wird von rechts nach links geschrieben. Die App ber√ºcksichtigt dies automatisch. Alle persischen Texte werden korrekt von rechts nach links dargestellt.</p>
            </div>
        </div>
    </div>

    <div class="translation-popup" id="translationPopup"></div>

    <script>
        // Global Variables
        let currentSection = 'mainMenu';
        let previousSection = '';
        let score = 0;

        // Quiz Data
        const quizData = [
            { question: "Geh!", options: ["ÿ®ÿ±Ÿà", "ÿ®ÿ±Ÿà€åÿØ", "ÿ®€åÿß", "ÿ®€åÿß€å€åÿØ"], correct: 0 },
            { question: "Gehen Sie!", options: ["ÿ®ÿ±Ÿà", "ÿ®ÿ±Ÿà€åÿØ", "ÿ®€åÿß", "ÿ®€åÿß€å€åÿØ"], correct: 1 },
            { question: "Komm!", options: ["ÿ®ÿ±Ÿà", "ÿ®ÿ±Ÿà€åÿØ", "ÿ®€åÿß", "ÿ®€åÿß€å€åÿØ"], correct: 2 },
            { question: "Kommen Sie!", options: ["ÿ®ÿ±Ÿà", "ÿ®ÿ±Ÿà€åÿØ", "ÿ®€åÿß", "ÿ®€åÿß€å€åÿØ"], correct: 3 },
            { question: "Iss!", options: ["ÿ®ÿÆŸàÿ±", "ÿ®ÿÆŸàÿ±€åÿØ", "ŸÜÿÆŸàÿ±", "ŸÜÿÆŸàÿ±€åÿØ"], correct: 0 },
            { question: "Essen Sie!", options: ["ÿ®ÿÆŸàÿ±", "ÿ®ÿÆŸàÿ±€åÿØ", "ŸÜÿÆŸàÿ±", "ŸÜÿÆŸàÿ±€åÿØ"], correct: 1 },
            { question: "Iss nicht!", options: ["ÿ®ÿÆŸàÿ±", "ÿ®ÿÆŸàÿ±€åÿØ", "ŸÜÿÆŸàÿ±", "ŸÜÿÆŸàÿ±€åÿØ"], correct: 2 },
            { question: "Essen Sie nicht!", options: ["ÿ®ÿÆŸàÿ±", "ÿ®ÿÆŸàÿ±€åÿØ", "ŸÜÿÆŸàÿ±", "ŸÜÿÆŸàÿ±€åÿØ"], correct: 3 },
            { question: "Schreib!", options: ["ÿ®ŸÜŸà€åÿ≥", "ÿ®ŸÜŸà€åÿ≥€åÿØ", "ŸÜŸÜŸà€åÿ≥", "ŸÜŸÜŸà€åÿ≥€åÿØ"], correct: 0 },
            { question: "Schreiben Sie!", options: ["ÿ®ŸÜŸà€åÿ≥", "ÿ®ŸÜŸà€åÿ≥€åÿØ", "ŸÜŸÜŸà€åÿ≥", "ŸÜŸÜŸà€åÿ≥€åÿØ"], correct: 1 },
            { question: "Bring!", options: ["ÿ®€åÿßŸàÿ±", "ÿ®€åÿßŸàÿ±€åÿØ", "ŸÜ€åÿßŸàÿ±", "ŸÜ€åÿßŸàÿ±€åÿØ"], correct: 0 },
            { question: "Bringen Sie!", options: ["ÿ®€åÿßŸàÿ±", "ÿ®€åÿßŸàÿ±€åÿØ", "ŸÜ€åÿßŸàÿ±", "ŸÜ€åÿßŸàÿ±€åÿØ"], correct: 1 },
            { question: "Mach!", options: ["⁄©ŸÜ", "⁄©ŸÜ€åÿØ", "ŸÜ⁄©ŸÜ", "ŸÜ⁄©ŸÜ€åÿØ"], correct: 0 },
            { question: "Machen Sie!", options: ["⁄©ŸÜ", "⁄©ŸÜ€åÿØ", "ŸÜ⁄©ŸÜ", "ŸÜ⁄©ŸÜ€åÿØ"], correct: 1 },
            { question: "Mach nicht!", options: ["⁄©ŸÜ", "⁄©ŸÜ€åÿØ", "ŸÜ⁄©ŸÜ", "ŸÜ⁄©ŸÜ€åÿØ"], correct: 2 },
            { question: "Lies!", options: ["ÿ®ÿÆŸàÿßŸÜ", "ÿ®ÿÆŸàÿßŸÜ€åÿØ", "ŸÜÿÆŸàÿßŸÜ", "ŸÜÿÆŸàÿßŸÜ€åÿØ"], correct: 0 },
            { question: "Lesen Sie!", options: ["ÿ®ÿÆŸàÿßŸÜ", "ÿ®ÿÆŸàÿßŸÜ€åÿØ", "ŸÜÿÆŸàÿßŸÜ", "ŸÜÿÆŸàÿßŸÜ€åÿØ"], correct: 1 },
            { question: "Sag!", options: ["ÿ®⁄ØŸà", "ÿ®⁄ØŸà€å€åÿØ", "ŸÜ⁄ØŸà", "ŸÜ⁄ØŸà€å€åÿØ"], correct: 0 },
            { question: "Sagen Sie!", options: ["ÿ®⁄ØŸà", "ÿ®⁄ØŸà€å€åÿØ", "ŸÜ⁄ØŸà", "ŸÜ⁄ØŸà€å€åÿØ"], correct: 1 },
            { question: "Hab!", options: ["ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥", "ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥€åÿØ", "ŸÜÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥", "ŸÜÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥€åÿØ"], correct: 0 }
        ];

        let currentQuizIndex = 0;

        // Mirza Ghasemi Vocabulary Data
        const mirzaVocab = [
            { persian: "ÿ®ÿßÿØŸêŸÖÿ¨ÿßŸÜ", german: "Aubergine" },
            { persian: "⁄ØŸàÿ¨Ÿá‚ÄåŸÅŸéÿ±ŸéŸÜ⁄Ø€å", german: "Tomate" },
            { persian: "ÿ≥€åÿ±", german: "Knoblauch" },
            { persian: "ÿ±Ÿàÿ∫ŸéŸÜ", german: "√ñl" },
            { persian: "ŸÜŸéŸÖŸé⁄©", german: "Salz" },
            { persian: "ŸÅŸêŸÑŸÅŸêŸÑ", german: "Pfeffer" },
            { persian: "ÿ≤Ÿéÿ±ÿØ⁄ÜŸàÿ®Ÿá", german: "Kurkuma" },
            { persian: "ÿ¨ŸéÿπŸÅŸéÿ±€å", german: "Petersilie" },
            { persian: "⁄ØŸêÿ¥ŸÜ€åÿ≤", german: "Koriander" },
            { persian: "ÿ®ÿ¥Ÿà€å", german: "wasch" },
            { persian: "ÿ®ŸêŸæŸéÿ≤", german: "koch/brat" },
            { persian: "ÿ®ŸêŸê⁄©ŸéŸÜ", german: "sch√§l ab" },
            { persian: "ŸÑŸêŸá ⁄©ŸÜ", german: "zerdr√ºck" },
            { persian: "ÿÆŸèÿ±ÿØ ⁄©ŸÜ", german: "schneide klein" },
            { persian: "⁄Øÿ±ŸÖ ⁄©ŸÜ", german: "erhitz" },
            { persian: "ÿ®ÿ±€åÿ≤", german: "gie√ü hinein" },
            { persian: "ÿ≥Ÿèÿ±ÿÆ ⁄©ŸÜ", german: "brat an" },
            { persian: "ÿßŸêÿ∂ÿßŸÅŸêŸá ⁄©ŸÜ", german: "f√ºg hinzu" },
            { persian: "ŸáŸéŸÖ ÿ®ÿ≤ŸÜ", german: "r√ºhr um" },
            { persian: "ŸÖŸéÿÆŸÑŸàÿ∑ ⁄©ŸÜ", german: "vermisch" },
            { persian: "ÿ®Ÿê⁄ÜŸêÿ¥", german: "probier" },
            { persian: "ÿ≥Ÿêÿ±Ÿà ⁄©ŸèŸÜ", german: "serviere" },
            { persian: "ÿ®ŸèÿÆŸèŸàÿ±", german: "iss" }
        ];

        let currentMirzaCardIndex = 0;

        // Adas Polo Vocabulary
        const adasVocab = [
            { persian: "ÿπÿØÿ≥", german: "Linsen" },
            { persian: "ÿ®ÿ±ŸÜÿ¨", german: "Reis" },
            { persian: "Ÿæ€åÿßÿ≤", german: "Zwiebel" },
            { persian: "⁄©ÿ¥ŸÖÿ¥", german: "Rosinen" },
            { persian: "ÿ≤ÿ±ÿØ⁄ÜŸàÿ®Ÿá", german: "Kurkuma" },
            { persian: "ÿØÿßÿ±⁄Ü€åŸÜ", german: "Zimt" },
            { persian: "ÿ®ÿ¥Ÿà€å", german: "wasch" },
            { persian: "ÿ®ÿ±€åÿ≤", german: "gie√ü" },
            { persian: "ÿ®Ÿæÿ≤", german: "koch" },
            { persian: "ÿ®ÿÆ€åÿ≥ÿßŸÜ", german: "weich ein" },
            { persian: "ŸæŸàÿ≥ÿ™ ÿ®⁄©ŸÜ", german: "sch√§l" },
            { persian: "ÿÆŸèÿ±ÿØ ⁄©ŸÜ", german: "hack klein" },
            { persian: "⁄Øÿ±ŸÖ ⁄©ŸÜ", german: "erhitz" },
            { persian: "ÿ≥ÿ±ÿÆ ⁄©ŸÜ", german: "brat" },
            { persian: "ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ", german: "f√ºg hinzu" },
            { persian: "ŸáŸÖ ÿ®ÿ≤ŸÜ", german: "r√ºhr um" },
            { persian: "ŸÖÿÆŸÑŸàÿ∑ ⁄©ŸÜ", german: "vermisch" },
            { persian: "ÿØŸÖ ÿ®⁄Øÿ∞ÿßÿ±", german: "lass d√§mpfen" },
            { persian: "ÿµÿ®ÿ± ⁄©ŸÜ", german: "warte" },
            { persian: "ÿ®⁄©ÿ¥", german: "gib auf (Teller)" },
            { persian: "ÿ™ÿ≤€å€åŸÜ ⁄©ŸÜ", german: "garniere" }
        ];

        let currentAdasCardIndex = 0;

        // Gap Fill Data
        const gapFillData = [
            // Page 1
            [
                { german: "Mach das Fenster auf!", persian: "ŸæŸÜÿ¨ÿ±Ÿá ÿ±ÿß ...............", answer: "ÿ®ÿßÿ≤ ⁄©ŸÜ", hint: "ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ / ÿ®ÿßÿ≤ ⁄©ŸÜŸÄ" },
                { german: "Macht bitte die T√ºr zu!", persian: "ÿØÿ± ÿ±ÿß ....‚Ä¶", answer: "ÿ®ÿ®ŸÜÿØ€åÿØ", hint: "ÿ®ÿ≥ÿ™ŸÜ / ÿ®ŸÜÿØ" },
                { german: "Gib mir das Salz!", persian: "ŸÜŸÖ⁄© ÿ±ÿß ÿ®Ÿá ŸÖŸÜ .............", answer: "ÿ®ÿØŸá", hint: "ÿØÿßÿØŸÜ / ÿØŸá" },
                { german: "Achte genau!", persian: "ÿÆŸàÿ® ..........", answer: "ÿ™Ÿàÿ¨Ÿá ⁄©ŸÜ", hint: "ÿ™Ÿàÿ¨Ÿá ⁄©ÿ±ÿØŸÜ / ÿ™Ÿàÿ¨Ÿá ⁄©ŸÜ" },
                { german: "Schneide die Zwiebel fein!", persian: "Ÿæ€åÿßÿ≤ ÿ±ÿß..............", answer: "ÿÆÿ±ÿØ ⁄©ŸÜ", hint: "ÿÆÿ±ÿØ ⁄©ÿ±ÿØŸÜ / ÿÆÿ±ÿØ ⁄©ŸÜ" }
            ],
            // Page 2
            [
                { german: "Schneidet die Tomaten!", persian: "⁄ØŸàÿ¨Ÿá‚ÄåŸÅÿ±ŸÜ⁄Ø€å‚ÄåŸáÿß ÿ±ÿß .............", answer: "ÿÆÿ±ÿØ ⁄©ŸÜ€åÿØ", hint: "ÿÆÿ±ÿØ ⁄©ÿ±ÿØŸÜ / ÿÆÿ±ÿØ ⁄©ŸÜ" },
                { german: "Warte eine Minute!", persian: "€å⁄© ÿØŸÇ€åŸÇŸá .............", answer: "ÿµÿ®ÿ± ⁄©ŸÜ", hint: "ÿµÿ®ÿ± ⁄©ÿ±ÿØŸÜ / ÿµÿ®ÿ± ⁄©ŸÜ" },
                { german: "Wartet auf mich!", persian: "ŸÖŸÜÿ™ÿ∏ÿ±ŸêŸÖ .............", answer: "ÿ®ÿßÿ¥€åÿØ", hint: "ÿ®ŸàÿØŸÜ / ÿ®ÿßÿ¥" },
                { german: "Lies den Text nochmal!", persian: "ŸÖÿ™ŸÜ ÿ±ÿß ÿØŸàÿ®ÿßÿ±Ÿá .........", answer: "ÿ®ÿÆŸàÿßŸÜ", hint: "ÿÆŸàÿßŸÜÿØŸÜ / ÿÆŸàÿßŸÜ" },
                { german: "Lest die Aufgabe!", persian: "ÿ™ŸÖÿ±€åŸÜ ÿ±ÿß ‚Ä¶!", answer: "ÿ®ÿÆŸàÿßŸÜ€åÿØ", hint: "ÿÆŸàÿßŸÜÿØŸÜ / ÿÆŸàÿßŸÜ" }
            ],
            // Page 3
            [
                { german: "Trink etwas Wasser!", persian: "⁄©ŸÖ€å ÿ¢ÿ® ‚Ä¶!", answer: "ÿ®ŸÜŸàÿ¥", hint: "ŸÜŸàÿ¥€åÿØŸÜ / ŸÜŸàÿ¥" },
                { german: "Trinkt genug Wasser!", persian: "ÿ®Ÿá ÿßŸÜÿØÿßÿ≤Ÿá ÿ¢ÿ® ‚Ä¶!", answer: "ÿ®ŸÜŸàÿ¥€åÿØ", hint: "ŸÜŸàÿ¥€åÿØŸÜ / ŸÜŸàÿ¥" },
                { german: "Schreib deinen Namen!", persian: "ŸÜÿßŸÖÿ™ ÿ±ÿß ‚Ä¶!", answer: "ÿ®ŸÜŸà€åÿ≥", hint: "ŸÜŸàÿ¥ÿ™ŸÜ / ŸÜŸà€åÿ≥" },
                { german: "Schreibt bitte deutlicher!", persian: "Ÿàÿßÿ∂ÿ≠‚Äåÿ™ÿ± ‚Ä¶!", answer: "ÿ®ŸÜŸà€åÿ≥€åÿØ", hint: "ŸÜŸàÿ¥ÿ™ŸÜ / ŸÜŸà€åÿ≥" },
                { german: "Bring das Buch mit!", persian: "⁄©ÿ™ÿßÿ® ÿ±ÿß ‚Ä¶!", answer: "ÿ®€åÿßŸàÿ±", hint: "ÿ¢Ÿàÿ±ÿØŸÜ / ÿ¢Ÿàÿ±" }
            ],
            // Page 4
            [
                { german: "Bringt eure Sachen mit!", persian: "Ÿàÿ≥ÿß€åŸÑÿ™ÿßŸÜ ÿ±ÿß ‚Ä¶!", answer: "ÿ®€åÿßŸàÿ±€åÿØ", hint: "ÿ¢Ÿàÿ±ÿØŸÜ / ÿ¢Ÿàÿ±" },
                { german: "Mach dir keine Sorgen!", persian: "ŸÜ⁄Øÿ±ÿßŸÜ ‚Ä¶!", answer: "ŸÜÿ®ÿßÿ¥", hint: "ÿ®ŸàÿØŸÜ / ÿ®ÿßÿ¥" },
                { german: "Macht kein Chaos!", persian: "ÿ®€å‚ÄåŸÜÿ∏ŸÖ€å ‚Ä¶!", answer: "ÿß€åÿ¨ÿßÿØ ŸÜ⁄©ŸÜ€åÿØ", hint: "ÿß€åÿ¨ÿßÿØ ⁄©ÿ±ÿØŸÜ / ÿß€åÿ¨ÿßÿØ ⁄©ŸÜ" },
                { german: "Koch das Gem√ºse weich!", persian: "ÿ≥ÿ®ÿ≤€åÿ¨ÿßÿ™ ÿ±ÿß ŸÜÿ±ŸÖ ‚Ä¶!", answer: "ÿ®Ÿæÿ≤", hint: "ŸæÿÆÿ™ŸÜ / Ÿæÿ≤" },
                { german: "Kocht die Linsen bis sie fertig sind!", persian: "ÿπÿØÿ≥‚ÄåŸáÿß ÿ±ÿß ÿ™ÿß ÿ¢ŸÖÿßÿØŸá ÿ¥ŸàŸÜÿØ ‚Ä¶!", answer: "ÿ®Ÿæÿ≤€åÿØ", hint: "ŸæÿÆÿ™ŸÜ / Ÿæÿ≤" }
            ],
            // Page 5
            [
                { german: "Komm bitte her!", persian: "ŸÑÿ∑ŸÅÿßŸã ÿß€åŸÜ‚Äåÿ¨ÿß ‚Ä¶!", answer: "ÿ®€åÿß", hint: "ÿ¢ŸÖÿØŸÜ / ÿ¢" },
                { german: "Kommt alle hierher!", persian: "ŸáŸÖŸá ÿß€åŸÜ‚Äåÿ¨ÿß ‚Ä¶!", answer: "ÿ®€åÿß€å€åÿØ", hint: "ÿ¢ŸÖÿØŸÜ / ÿ¢" },
                { german: "Geh geradeaus!", persian: "ŸÖÿ≥ÿ™ŸÇ€åŸÖ ‚Ä¶!", answer: "ÿ®ÿ±Ÿà", hint: "ÿ±ŸÅÿ™ŸÜ / ÿ±Ÿà" },
                { german: "Geht nach links!", persian: "ÿ®Ÿá ⁄ÜŸæ ‚Ä¶!", answer: "ÿ®ÿ±Ÿà€åÿØ", hint: "ÿ±ŸÅÿ™ŸÜ / ÿ±Ÿà" },
                { german: "Lass das!", persian: "ÿß€åŸÜ ⁄©ÿßÿ± ÿ±ÿß ‚Ä¶!", answer: "ÿ±Ÿáÿß ⁄©ŸÜ", hint: "ÿ±Ÿáÿß ⁄©ÿ±ÿØŸÜ / ÿ±Ÿáÿß ⁄©ŸÜ" }
            ],
            // Page 6
            [
                { german: "Lasst das bitte!", persian: "ŸÑÿ∑ŸÅÿßŸã ÿß€åŸÜ ⁄©ÿßÿ± ÿ±ÿß ‚Ä¶!", answer: "ÿ±Ÿáÿß ⁄©ŸÜ€åÿØ", hint: "ÿ±Ÿáÿß ⁄©ÿ±ÿØŸÜ / ÿ±Ÿáÿß ⁄©ŸÜ" },
                { german: "√ñffne das Buch auf Seite zehn!", persian: "⁄©ÿ™ÿßÿ® ÿ±ÿß ÿØÿ± ÿµŸÅÿ≠ŸáŸî ÿØŸá ‚Ä¶!", answer: "ÿ®ÿßÿ≤ ⁄©ŸÜ", hint: "ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ / ÿ®ÿßÿ≤ ⁄©ŸÜ" },
                { german: "√ñffnet eure Hefte!", persian: "ÿØŸÅÿ™ÿ±Ÿáÿß€åÿ™ÿßŸÜ ÿ±ÿß ‚Ä¶!", answer: "ÿ®ÿßÿ≤ ⁄©ŸÜ€åÿØ", hint: "ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ / ÿ®ÿßÿ≤ ⁄©ŸÜ" },
                { german: "Schlaf!", persian: "............!", answer: "ÿ®ÿÆŸàÿßÿ®", hint: "ÿÆŸàÿßÿ®€åÿØŸÜ / ÿÆŸàÿßÿ®" },
                { german: "Schlaft nicht so sp√§t!", persian: "ÿÆ€åŸÑ€å ÿØ€åÿ± ‚Ä¶!", answer: "ŸÜÿÆŸàÿßÿ®€åÿØ", hint: "ÿÆŸàÿßÿ®€åÿØŸÜ / ÿÆŸàÿßÿ®" }
            ],
            // Page 7
            [
                { german: "R√ºhr die Suppe um!", persian: "ÿ≥ŸàŸæ ÿ±ÿß ‚Ä¶!", answer: "ŸáŸÖ ÿ®ÿ≤ŸÜ", hint: "ŸáŸÖ ÿ≤ÿØŸÜ / ŸáŸÖ ÿ®ÿ≤ŸÜ" },
                { german: "R√ºhrt das √ñl ein!", persian: "ÿ±Ÿàÿ∫ŸÜ ÿ±ÿß ‚Ä¶!", answer: "ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ€åÿØ", hint: "ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ / ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ" },
                { german: "Pass auf!", persian: "ŸÖÿ±ÿßŸÇÿ® ‚Ä¶!", answer: "ÿ®ÿßÿ¥", hint: "ÿ®ŸàÿØŸÜ / ÿ®ÿßÿ¥" },
                { german: "Passt bitte auf!", persian: "ŸÑÿ∑ŸÅÿßŸã ŸÖÿ±ÿßŸÇÿ® ‚Ä¶!", answer: "ÿ®ÿßÿ¥€åÿØ", hint: "ÿ®ŸàÿØŸÜ / ÿ®ÿßÿ¥" },
                { german: "Sag die Wahrheit!", persian: "ÿ≠ŸÇ€åŸÇÿ™ ÿ±ÿß ‚Ä¶!", answer: "ÿ®⁄ØŸà", hint: "⁄ØŸÅÿ™ŸÜ / ⁄ØŸà" }
            ],
            // Page 8
            [
                { german: "Sagt nichts!", persian: "⁄Ü€åÿ≤€å ‚Ä¶!", answer: "ŸÜ⁄ØŸà€å€åÿØ", hint: "⁄ØŸÅÿ™ŸÜ / ⁄ØŸà" },
                { german: "Wasch das Gem√ºse!", persian: "ÿ≥ÿ®ÿ≤€åÿ¨ÿßÿ™ ÿ±ÿß ‚Ä¶!", answer: "ÿ®ÿ¥Ÿà€å", hint: "ÿ¥ÿ≥ÿ™ŸÜ / ÿ¥Ÿà€å" },
                { german: "Wascht eure H√§nde!", persian: "ÿØÿ≥ÿ™‚ÄåŸáÿß€åÿ™ÿßŸÜ ÿ±ÿß ‚Ä¶!", answer: "ÿ®ÿ¥Ÿà€å€åÿØ", hint: "ÿ¥ÿ≥ÿ™ŸÜ / ÿ¥Ÿà€å" },
                { german: "Nimm deine Tasche nicht!", persian: "⁄©€åŸÅÿ™ ÿ±ÿß ‚Ä¶!", answer: "ÿ®ÿ±ÿØÿßÿ± ŸÜ⁄©ŸÜ", hint: "ÿ®ÿ±ÿØÿßÿ¥ÿ™ŸÜ / ÿ®ÿ±ÿØÿßÿ±" },
                { german: "Nehmt eure B√ºcher mit!", persian: "⁄©ÿ™ÿßÿ®‚ÄåŸáÿß€åÿ™ÿßŸÜ ÿ±ÿß ‚Ä¶!", answer: "ÿ®ÿ±ÿØÿßÿ±€åÿØ", hint: "ÿ®ÿ±ÿØÿßÿ¥ÿ™ŸÜ / ÿ®ÿ±ÿØÿßÿ±" }
            ]
        ];

        let currentGapPage = 0;

        // Sentence Construction Data
        const constructionData = [
            {
                german: "Geh von hier geradeaus.",
                persian: "ÿßÿ≤ ÿß€åŸÜ‚Äåÿ¨ÿß ŸÖÿ≥ÿ™ŸÇ€åŸÖ ÿ®ÿ±Ÿà.",
                words: ["ÿßÿ≤", "ÿß€åŸÜ‚Äåÿ¨ÿß", "ŸÖÿ≥ÿ™ŸÇ€åŸÖ", "ÿ®ÿ±Ÿà"],
                distractors: ["ÿ®ÿ±Ÿà€åÿØ", "ÿ±ÿßÿ≥ÿ™"]
            },
            {
                german: "Bieg an der Kreuzung rechts ab.",
                persian: "ÿßÿ≤ ⁄ÜŸáÿßÿ±ÿ±ÿßŸá ÿ®Ÿá ÿ±ÿßÿ≥ÿ™ ÿ®Ÿæ€å⁄Ü.",
                words: ["ÿßÿ≤", "⁄ÜŸáÿßÿ±ÿ±ÿßŸá", "ÿ®Ÿá", "ÿ±ÿßÿ≥ÿ™", "ÿ®Ÿæ€å⁄Ü"],
                distractors: ["⁄ÜŸæ"]
            },
            {
                german: "Biegen Sie an der n√§chsten Station links ab.",
                persian: "ÿØÿ± ÿß€åÿ≥ÿ™⁄ØÿßŸá ÿ®ÿπÿØ€å ÿ®Ÿá ⁄ÜŸæ ÿ®Ÿæ€å⁄Ü€åÿØ.",
                words: ["ÿØÿ±", "ÿß€åÿ≥ÿ™⁄ØÿßŸá", "ÿ®ÿπÿØ€å", "ÿ®Ÿá", "⁄ÜŸæ", "ÿ®Ÿæ€å⁄Ü€åÿØ"],
                distractors: ["ÿ±ÿßÿ≥ÿ™", "ÿ®Ÿæ€å⁄Ü"]
            },
            {
                german: "Gehen Sie bis zur Ampel.",
                persian: "ÿ™ÿß ⁄Üÿ±ÿßÿ∫ ŸÇÿ±ŸÖÿ≤ ÿ®ÿ±Ÿà€åÿØ.",
                words: ["ÿ™ÿß", "⁄Üÿ±ÿßÿ∫", "ŸÇÿ±ŸÖÿ≤", "ÿ®ÿ±Ÿà€åÿØ"],
                distractors: ["ÿ®ÿ±Ÿà", "ÿ≥ÿ®ÿ≤"]
            },
            {
                german: "Geh am Park vorbei.",
                persian: "ÿßÿ≤ ⁄©ŸÜÿßÿ±Ÿê Ÿæÿßÿ±⁄© ÿ±ÿØ ÿ¥Ÿà.",
                words: ["ÿßÿ≤", "⁄©ŸÜÿßÿ±Ÿê", "Ÿæÿßÿ±⁄©", "ÿ±ÿØ", "ÿ¥Ÿà"],
                distractors: ["ÿ¥Ÿà€åÿØ", "ÿ®ÿßÿ∫"]
            },
            {
                german: "Gehen Sie √ºber die Br√ºcke.",
                persian: "ÿßÿ≤ ŸæŸÑ ÿ±ÿØ ÿ¥Ÿà€åÿØ.",
                words: ["ÿßÿ≤", "ŸæŸÑ", "ÿ±ÿØ", "ÿ¥Ÿà€åÿØ"],
                distractors: ["ÿ¥Ÿà", "ÿÆ€åÿßÿ®ÿßŸÜ"]
            },
            {
                german: "Warte an der Stra√üenecke.",
                persian: "ÿ≥ÿ± ÿÆ€åÿßÿ®ÿßŸÜ ŸÖŸÜÿ™ÿ∏ÿ± ÿ®ŸÖÿßŸÜ.",
                words: ["ÿ≥ÿ±", "ÿÆ€åÿßÿ®ÿßŸÜ", "ŸÖŸÜÿ™ÿ∏ÿ±", "ÿ®ŸÖÿßŸÜ"],
                distractors: ["ÿ®ŸÖÿßŸÜ€åÿØ", "⁄©Ÿà⁄ÜŸá"]
            },
            {
                german: "Gehen Sie zur√ºck zur Bushaltestelle.",
                persian: "ÿ®Ÿá ÿß€åÿ≥ÿ™⁄ØÿßŸáŸê ÿßÿ™Ÿàÿ®Ÿàÿ≥ ÿ®ÿ±⁄Øÿ±ÿØ€åÿØ.",
                words: ["ÿ®Ÿá", "ÿß€åÿ≥ÿ™⁄ØÿßŸáŸê", "ÿßÿ™Ÿàÿ®Ÿàÿ≥", "ÿ®ÿ±⁄Øÿ±ÿØ€åÿØ"],
                distractors: ["ÿ®ÿ±⁄Øÿ±ÿØ", "ŸÖÿ™ro"]
            },
            {
                german: "Folge der Hauptstra√üe.",
                persian: "ÿÆ€åÿßÿ®ÿßŸÜŸê ÿßÿµŸÑ€å ÿ±ÿß ÿØŸÜÿ®ÿßŸÑ ⁄©ŸÜ.",
                words: ["ÿÆ€åÿßÿ®ÿßŸÜŸê", "ÿßÿµŸÑ€å", "ÿ±ÿß", "ÿØŸÜÿ®ÿßŸÑ", "⁄©ŸÜ"],
                distractors: ["⁄©ŸÜ€åÿØ", "ŸÅÿ±ÿπ€å"]
            },
            {
                german: "Gehen Sie weiter nach links.",
                persian: "ÿ®Ÿá ÿ≥ŸÖÿ™Ÿê ⁄ÜŸæ ÿßÿØÿßŸÖŸá ÿØŸá€åÿØ.",
                words: ["ÿ®Ÿá", "ÿ≥ŸÖÿ™Ÿê", "⁄ÜŸæ", "ÿßÿØÿßŸÖŸá", "ÿØŸá€åÿØ"],
                distractors: ["ÿ±ÿßÿ≥ÿ™", "ÿ®ÿØŸá"]
            },
            {
                german: "Stell dich vor die Bank.",
                persian: "ÿ±Ÿàÿ®ÿ±Ÿà€å ÿ®ÿßŸÜ⁄© ÿ®ÿß€åÿ≥ÿ™.",
                words: ["ÿ±Ÿàÿ®ÿ±Ÿà€å", "ÿ®ÿßŸÜ⁄©", "ÿ®ÿß€åÿ≥ÿ™"],
                distractors: ["ÿ®ÿß€åÿ≥ÿ™€åÿØ", "Ÿæÿ¥ÿ™"]
            },
            {
                german: "Gehen Sie die Treppe hinauf.",
                persian: "ÿßÿ≤ ŸæŸÑŸá‚ÄåŸáÿß ÿ®ÿßŸÑÿß ÿ®ÿ±Ÿà€åÿØ.",
                words: ["ÿßÿ≤", "ŸæŸÑŸá‚ÄåŸáÿß", "ÿ®ÿßŸÑÿß", "ÿ®ÿ±Ÿà€åÿØ"],
                distractors: ["Ÿæÿß€å€åŸÜ", "ÿ®ÿ±Ÿà"]
            },
            {
                german: "Komm die Treppe hinunter.",
                persian: "ÿßÿ≤ ŸæŸÑŸá‚ÄåŸáÿß Ÿæÿß€å€åŸÜ ÿ®€åÿß.",
                words: ["ÿßÿ≤", "ŸæŸÑŸá‚ÄåŸáÿß", "Ÿæÿß€å€åŸÜ", "ÿ®€åÿß"],
                distractors: ["ÿ®€åÿß€å€åÿØ", "ÿ®ÿßŸÑÿß"]
            },
            {
                german: "Schauen Sie auf das Schild.",
                persian: "ÿ®Ÿá ÿ™ÿßÿ®ŸÑŸà ŸÜ⁄ØÿßŸá ⁄©ŸÜ€åÿØ.",
                words: ["ÿ®Ÿá", "ÿ™ÿßÿ®ŸÑŸà", "ŸÜ⁄ØÿßŸá", "⁄©ŸÜ€åÿØ"],
                distractors: ["⁄©ŸÜ", "ÿπ⁄©ÿ≥"]
            },
            {
                german: "Lies die Adresse noch einmal.",
                persian: "ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß ÿØŸàÿ®ÿßÿ±Ÿá ÿ®ÿÆŸàÿßŸÜ.",
                words: ["ÿ¢ÿØÿ±ÿ≥", "ÿ±ÿß", "ÿØŸàÿ®ÿßÿ±Ÿá", "ÿ®ÿÆŸàÿßŸÜ"],
                distractors: ["ÿ®ÿÆŸàÿßŸÜ€åÿØ", "€å⁄©ÿ®ÿßÿ±"]
            },
            {
                german: "Gehen Sie am Supermarkt vorbei.",
                persian: "ÿßÿ≤ ⁄©ŸÜÿßÿ±Ÿê ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™ ÿπÿ®Ÿàÿ± ⁄©ŸÜ€åÿØ.",
                words: ["ÿßÿ≤", "⁄©ŸÜÿßÿ±Ÿê", "ÿ≥ŸàŸæÿ±ŸÖÿßÿ±⁄©ÿ™", "ÿπÿ®Ÿàÿ±", "⁄©ŸÜ€åÿØ"],
                distractors: ["⁄©ŸÜ", "ŸÖÿ∫ÿßÿ≤Ÿá"]
            },
            {
                german: "Geh zur n√§chsten Stra√üe.",
                persian: "ÿ®Ÿá ÿÆ€åÿßÿ®ÿßŸÜŸê ÿ®ÿπÿØ€å ÿ®ÿ±Ÿà.",
                words: ["ÿ®Ÿá", "ÿÆ€åÿßÿ®ÿßŸÜŸê", "ÿ®ÿπÿØ€å", "ÿ®ÿ±Ÿà"],
                distractors: ["ÿ®ÿ±Ÿà€åÿØ", "ŸÇÿ®ŸÑ€å"]
            },
            {
                german: "√ñffnen Sie die T√ºr des Geb√§udes.",
                persian: "ÿØÿ±Ÿê ÿ≥ÿßÿÆÿ™ŸÖÿßŸÜ ÿ±ÿß ÿ®ÿßÿ≤ ⁄©ŸÜ€åÿØ.",
                words: ["ÿØÿ±Ÿê", "ÿ≥ÿßÿÆÿ™ŸÖÿßŸÜ", "ÿ±ÿß", "ÿ®ÿßÿ≤", "⁄©ŸÜ€åÿØ"],
                distractors: ["⁄©ŸÜ", "ÿ®ÿ≥ÿ™Ÿá"]
            },
            {
                german: "Finde die Haust√ºr.",
                persian: "ÿØÿ±Ÿê ÿÆÿßŸÜŸá ÿ±ÿß Ÿæ€åÿØÿß ⁄©ŸÜ.",
                words: ["ÿØÿ±Ÿê", "ÿÆÿßŸÜŸá", "ÿ±ÿß", "Ÿæ€åÿØÿß", "⁄©ŸÜ"],
                distractors: ["⁄©ŸÜ€åÿØ", "ŸæŸÜÿ¨ÿ±Ÿá"]
            },
            {
                german: "Wenn du dich verirrst, frag nach.",
                persian: "ÿß⁄Øÿ± ⁄ØŸÖ ÿ¥ÿØ€åÿå ÿ≥ÿ§ÿßŸÑ ÿ®Ÿæÿ±ÿ≥.",
                words: ["ÿß⁄Øÿ±", "⁄ØŸÖ", "ÿ¥ÿØ€åÿå", "ÿ≥ÿ§ÿßŸÑ", "ÿ®Ÿæÿ±ÿ≥"],
                distractors: ["ÿ®Ÿæÿ±ÿ≥€åÿØ", "ÿ¨Ÿàÿßÿ®"]
            }
        ];

        let currentConstructionIndex = 0;
        let constructedSentence = [];

        // Navigation Functions
        function showSection(sectionId) {
            previousSection = currentSection;
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            currentSection = sectionId;

            // Show/hide back button
            if (sectionId === 'mainMenu') {
                document.getElementById('backBtn').style.display = 'none';
            } else {
                document.getElementById('backBtn').style.display = 'block';
            }

            // Initialize sections
            if (sectionId === 'recipe1') {
                initMirzaRecipe();
                updateMirzaFlashcard();
            } else if (sectionId === 'recipe2') {
                initAdasPoloExercise();
                updateAdasFlashcard();
            } else if (sectionId === 'gapfill') {
                currentGapPage = 0;
                showGapFillPage(currentGapPage);
            } else if (sectionId === 'construction') {
                currentConstructionIndex = 0;
                showConstructionExercise(currentConstructionIndex);
            }
        }

        function goHome() {
            showSection('mainMenu');
        }

        function goBack() {
            if (currentSection === 'grammar' && document.getElementById('quizContent').style.display === 'block') {
                // If in quiz, go back to grammar explanation
                document.getElementById('grammarContent').style.display = 'block';
                document.getElementById('quizContent').style.display = 'none';
            } else {
                showSection('mainMenu');
            }
        }

        // Quiz Functions
        function startQuiz() {
            currentQuizIndex = 0;
            score = 0;
            document.getElementById('grammarContent').style.display = 'none';
            document.getElementById('quizContent').style.display = 'block';
            document.getElementById('scoreDisplay').style.display = 'block';
            updateScore();
            showQuizQuestion();
        }

        function showQuizQuestion() {
            if (currentQuizIndex >= quizData.length) {
                showQuizResults();
                return;
            }

            const question = quizData[currentQuizIndex];
            const progress = ((currentQuizIndex + 1) / quizData.length) * 100;
            document.getElementById('quizProgress').style.width = progress + '%';

            let html = `
                <div class="question-box">
                    <div class="question-text">${question.question}</div>
                    <div class="options-grid">
            `;

            question.options.forEach((option, index) => {
                html += `
                    <div class="option-btn" onclick="checkAnswer(${index})">
                        ${option}
                    </div>
                `;
            });

            html += `
                    </div>
                </div>
            `;

            document.getElementById('quizQuestion').innerHTML = html;
        }

        function checkAnswer(selectedIndex) {
            const question = quizData[currentQuizIndex];
            const options = document.querySelectorAll('.option-btn');

            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('wrong');
                }
            });

            if (selectedIndex === question.correct) {
                score += 5;
                updateScore();
            }

            setTimeout(() => {
                currentQuizIndex++;
                showQuizQuestion();
            }, 1500);
        }

        function showQuizResults() {
            const percentage = (score / (quizData.length * 5)) * 100;
            let message = '';
            let emoji = '';

            if (percentage >= 90) {
                message = 'Ausgezeichnet!';
                emoji = 'üåü';
            } else if (percentage >= 70) {
                message = 'Sehr gut!';
                emoji = 'üëç';
            } else if (percentage >= 50) {
                message = 'Gut gemacht!';
                emoji = 'üëå';
            } else {
                message = 'Weiter √ºben!';
                emoji = 'üí™';
            }

            document.getElementById('quizQuestion').innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">${emoji}</div>
                    <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">${message}</h2>
                    <p style="font-size: 1.5em; margin-bottom: 30px;">
                        Du hast <strong>${score}</strong> von ${quizData.length * 5} Punkten erreicht!
                    </p>
                    <p style="font-size: 1.2em; margin-bottom: 30px;">
                        Das sind <strong>${percentage.toFixed(0)}%</strong>
                    </p>
                    <button class="next-btn" onclick="startQuiz()">üîÑ Nochmal √ºben</button>
                    <button class="next-btn" onclick="goHome()">üè† Zur√ºck zum Men√º</button>
                </div>
            `;
        }

        function updateScore() {
            document.getElementById('scoreValue').textContent = score;
        }

        // Mirza Ghasemi Recipe
        function initMirzaRecipe() {
            const recipeHTML = `
                <div class="recipe-section">
                    <h3>üß∫ ŸÖŸàÿßÿØ ŸÑÿßÿ≤ŸÖ (ÿ®ÿ±ÿß€å ÿØŸà ŸÜŸÅÿ±)</h3>
                    <p>ÿØŸà <span class="clickable-word" data-translation="St√ºck">ÿπŸéÿØŸéÿØ</span> <span class="clickable-word" data-translation="Aubergine">ÿ®ÿßÿØŸêŸÖÿ¨ÿßŸÜŸêŸê</span> <span class="clickable-word" data-translation="gro√ü">ÿØŸèÿ±Ÿèÿ¥ÿ™</span></p>
                    <p>ÿ≥Ÿá ÿπŸéÿØŸéÿØ <span class="clickable-word" data-translation="Tomate">⁄ØŸàÿ¨Ÿá‚ÄåŸÅŸéÿ±ŸéŸÜ⁄Ø€å</span></p>
                    <p>⁄ÜŸáÿßÿ± <span class="clickable-word" data-translation="Zehe">ÿ≠Ÿéÿ®ŸëŸá</span> <span class="clickable-word" data-translation="Knoblauch">ÿ≥€åÿ±</span></p>
                    <p>ÿØŸà <span class="clickable-word" data-translation="Essl√∂ffel">ŸÇÿßŸèÿ¥ŸÇŸê ÿ∫Ÿéÿ∞ÿßÿÆŸàÿ±€å</span> <span class="clickable-word" data-translation="√ñl">ÿ±Ÿàÿ∫ŸéŸÜ</span></p>
                    <p><span class="clickable-word" data-translation="Salz">ŸÜŸéŸÖŸé⁄©</span>ÿå <span class="clickable-word" data-translation="Pfeffer">ŸÅŸêŸÑŸÅŸêŸÑ</span>ÿå <span class="clickable-word" data-translation="Kurkuma">ÿ≤Ÿéÿ±ÿØ⁄ÜŸàÿ®Ÿá</span></p>
                    <p><span class="clickable-word" data-translation="bei Bedarf">ÿØÿ± ÿµŸàÿ±ÿ™Ÿê ÿ™ŸéŸÖÿß€åŸèŸÑ</span>: ⁄©ŸéŸÖ€å <span class="clickable-word" data-translation="Petersilie">ÿ¨ŸéÿπŸÅŸéÿ±€å</span> €åÿß <span class="clickable-word" data-translation="Koriander">⁄ØŸêÿ¥ŸÜ€åÿ≤Ÿê ÿ™ÿßÿ≤Ÿá</span></p>
                </div>

                <div class="recipe-section">
                    <h3>üë©‚Äçüç≥ ÿ∑ÿ±ÿ≤ ÿ™Ÿá€åŸá:</h3>
                    <p>€±. ÿ®ÿßÿØŸÖÿ¨ÿßŸÜ‚ÄåŸáÿß ÿ±ÿß <span class="clickable-word" data-translation="wasch">ÿ®ÿ¥Ÿà€å</span> Ÿà <span class="clickable-word" data-translation="trockne">ÿÆŸèÿ¥⁄© ⁄©ŸÜ</span>.</p>
                    <p>€≤. ÿ®ÿßÿØŸÖÿ¨ÿßŸÜ‚ÄåŸáÿß ÿ±ÿß ÿ±Ÿà€å ÿ¢ÿ™Ÿéÿ¥ €åÿß ÿØÿ± ŸÅÿ± <span class="clickable-word" data-translation="koch/brat">ÿ®ŸêŸæŸéÿ≤</span> ÿ™ÿß ŸæŸàÿ≥ÿ™‚Äåÿ¥ÿßŸÜ ÿ≥€åÿßŸá <span class="clickable-word" data-translation="wird">ÿ¥ŸéŸàŸéÿØ</span>.</p>
                    <p>€≥. <span class="clickable-word" data-translation="Schale">ŸæŸàÿ≥ÿ™Ÿê</span> ÿ®ÿßÿØŸÖÿ¨ÿßŸÜ‚ÄåŸáÿß ÿ±ÿß <span class="clickable-word" data-translation="sch√§l ab">ÿ®ŸêŸê⁄©ŸéŸÜ</span> Ÿà <span class="clickable-word" data-translation="Fruchtfleisch">⁄ØŸàÿ¥ÿ™Ÿê</span> ÿ¢ŸÜ‚ÄåŸáÿß ÿ±ÿß ÿ®ÿß ⁄ÜŸéŸÜ⁄ØÿßŸÑ <span class="clickable-word" data-translation="zerdr√ºcke">ŸÑŸêŸá ⁄©ŸÜ</span>.</p>
                    <p>€¥. ⁄ØŸàÿ¨Ÿá‚ÄåŸÅÿ±ŸÜ⁄Ø€å‚ÄåŸáÿß ÿ±ÿß ŸæŸàÿ≥ÿ™ ÿ®⁄©ŸÜ Ÿà <span class="clickable-word" data-translation="schneide klein">ÿÆŸèÿ±ÿØ ⁄©ŸÜ</span>.</p>
                    <p>€µ. ÿ≥€åÿ±Ÿáÿß ÿ±ÿß ŸæŸàÿ≥ÿ™ ÿ®⁄©ŸÜ Ÿà <span class="clickable-word" data-translation="fein">ÿ±€åÿ≤</span> ÿÆŸèÿ±ÿØ ⁄©ŸÜ.</p>
                    <p>€∂. ÿ±Ÿàÿ∫ŸÜ ÿ±ÿß ÿØÿ± <span class="clickable-word" data-translation="Pfanne">ÿ™ÿßÿ®ŸêŸá</span> <span class="clickable-word" data-translation="erhitze">⁄Øÿ±ŸÖ ⁄©ŸÜ</span>.</p>
                    <p>€∑. ÿ≥€åÿ± ÿ±ÿß ÿØÿ± ÿ±Ÿàÿ∫ŸéŸÜ <span class="clickable-word" data-translation="gie√ü hinein">ÿ®ÿ±€åÿ≤</span> Ÿà ⁄©ŸÖ€å <span class="clickable-word" data-translation="brat an">ÿ≥Ÿèÿ±ÿÆ ⁄©ŸÜ</span>.</p>
                    <p>€∏. ⁄ØŸàÿ¨Ÿá‚ÄåŸÅÿ±ŸÜ⁄Ø€å‚ÄåŸáÿß ÿ±ÿß <span class="clickable-word" data-translation="f√ºge hinzu">ÿßŸêÿ∂ÿßŸÅŸêŸá ⁄©ŸÜ</span> Ÿà ÿ®ŸêŸæŸéÿ≤ ÿ™ÿß <span class="clickable-word" data-translation="weich">ŸÜŸéÿ±ŸÖ</span> ÿ¥ŸàŸÜÿØ.</p>
                    <p>€π. ÿ®ÿßÿØŸÖÿ¨ÿßŸÜ‚ÄåŸáÿß ÿ±ÿß ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ Ÿà <span class="clickable-word" data-translation="r√ºhr um">ŸáŸéŸÖ ÿ®ÿ≤ŸÜ</span>.</p>
                    <p>€±€∞. ŸÜŸÖ⁄©ÿå ŸÅŸÑŸÅŸÑ Ÿà ÿ≤ÿ±ÿØ⁄ÜŸàÿ®Ÿá ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ Ÿà <span class="clickable-word" data-translation="vermische">ŸÖŸéÿÆŸÑŸàÿ∑ ⁄©ŸÜ</span>.</p>
                    <p>€±€±. ÿ∫ÿ∞ÿß ÿ±ÿß <span class="clickable-word" data-translation="zehn Minuten">ÿØŸéŸá ÿØŸÇ€åŸÇŸá</span> ÿ®ÿß <span class="clickable-word" data-translation="niedriger Hitze">ÿ≠Ÿéÿ±ÿßÿ±Ÿéÿ™Ÿê ⁄©ŸéŸÖ</span> ÿ®ŸêŸæŸéÿ≤.</p>
                    <p>€±€≤. <span class="clickable-word" data-translation="probiere">ÿ®Ÿê⁄ÜŸêÿ¥</span> Ÿà ÿØÿ± ÿµŸàÿ±ÿ™ ŸÜ€åÿßÿ≤ <span class="clickable-word" data-translation="Gew√ºrze">ÿßŸéÿØŸà€åŸá</span> ÿßŸêÿ∂ÿßŸÅŸêŸá ⁄©ŸèŸÜ.</p>
                    <p>€±€≥. ŸÖ€åÿ±ÿ≤ÿß ŸÇÿßÿ≥ŸÖ€å ÿ±ÿß ⁄ØŸéÿ±ŸÖ <span class="clickable-word" data-translation="serviere">ÿ≥Ÿêÿ±Ÿà ⁄©ŸèŸÜ</span> Ÿà ÿ®ÿß <span class="clickable-word" data-translation="frisches Brot">ŸÜÿßŸÜŸê ÿ™ÿßÿ≤Ÿá</span> €åÿß <span class="clickable-word" data-translation="Reis">ÿ®Ÿêÿ±ŸêŸÜÿ¨</span> <span class="clickable-word" data-translation="iss">ÿ®ŸèÿÆŸèŸàÿ±</span>.</p>
                </div>
            `;

            document.getElementById('mirzaRecipe').innerHTML = recipeHTML;

            // Add click events to clickable words
            document.querySelectorAll('.clickable-word').forEach(word => {
                word.addEventListener('click', function(e) {
                    showTranslation(e, this.getAttribute('data-translation'));
                });
            });
        }

        function showTranslation(event, translation) {
            const popup = document.getElementById('translationPopup');
            popup.textContent = translation;
            popup.style.display = 'block';
            popup.style.left = event.pageX + 10 + 'px';
            popup.style.top = event.pageY + 10 + 'px';

            setTimeout(() => {
                popup.style.display = 'none';
            }, 2000);
        }

        // Flashcard Functions
        function flipCard(cardId) {
            const card = document.getElementById(cardId);
            card.classList.toggle('flipped');
        }

        function updateMirzaFlashcard() {
            const vocab = mirzaVocab[currentMirzaCardIndex];
            document.getElementById('mirzaFront').textContent = vocab.persian;
            document.getElementById('mirzaBack').textContent = vocab.german;
            document.getElementById('mirzaFlashcard').classList.remove('flipped');
        }

        function nextCard(type) {
            if (type === 'mirza') {
                currentMirzaCardIndex = (currentMirzaCardIndex + 1) % mirzaVocab.length;
                updateMirzaFlashcard();
            } else if (type === 'adas') {
                currentAdasCardIndex = (currentAdasCardIndex + 1) % adasVocab.length;
                updateAdasFlashcard();
            }
        }

        function prevCard(type) {
            if (type === 'mirza') {
                currentMirzaCardIndex = (currentMirzaCardIndex - 1 + mirzaVocab.length) % mirzaVocab.length;
                updateMirzaFlashcard();
            } else if (type === 'adas') {
                currentAdasCardIndex = (currentAdasCardIndex - 1 + adasVocab.length) % adasVocab.length;
                updateAdasFlashcard();
            }
        }

        function updateAdasFlashcard() {
            const vocab = adasVocab[currentAdasCardIndex];
            document.getElementById('adasFront').textContent = vocab.persian;
            document.getElementById('adasBack').textContent = vocab.german;
            document.getElementById('adasFlashcard').classList.remove('flipped');
        }

        // Adas Polo Exercise
        function initAdasPoloExercise() {
            const exerciseHTML = `
                <div class="recipe-container">
                    <div class="recipe-section">
                        <h3>üß∫ ŸÖŸàÿßÿØ ŸÑÿßÿ≤ŸÖ (ÿ®ÿ±ÿß€å ÿØŸà ŸÜŸÅÿ±)</h3>
                        <p>€å⁄© Ÿæ€åŸÖÿßŸÜŸá <span class="clickable-word" data-translation="Linsen">ÿπÿØÿ≥</span></p>
                        <p>€å⁄© Ÿà ŸÜ€åŸÖ Ÿæ€åŸÖÿßŸÜŸá <span class="clickable-word" data-translation="Reis">ÿ®ÿ±ŸÜÿ¨</span></p>
                        <p>€å⁄© ÿπÿØÿØ <span class="clickable-word" data-translation="Zwiebel">Ÿæ€åÿßÿ≤</span> ÿ®ÿ≤ÿ±⁄Ø</p>
                        <p>ŸÜÿµŸÅ Ÿæ€åŸÖÿßŸÜŸá <span class="clickable-word" data-translation="Rosinen">⁄©ÿ¥ŸÖÿ¥</span></p>
                        <p>ÿØŸà ŸÇÿßÿ¥ŸÇ ÿ∫ÿ∞ÿßÿÆŸàÿ±€å ÿ±Ÿàÿ∫ŸÜ</p>
                        <p>ŸÜŸÖ⁄©ÿå ŸÅŸÑŸÅŸÑÿå ÿ≤ÿ±ÿØ⁄ÜŸàÿ®Ÿáÿå <span class="clickable-word" data-translation="Zimt">ÿØÿßÿ±⁄Ü€åŸÜ</span></p>
                    </div>

                    <div class="recipe-section">
                        <h3>üë©‚Äçüç≥ ÿ∑ÿ±ÿ≤ ÿ™Ÿá€åŸá:</h3>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Wasch die Linsen und gib sie in einen Topf.')">
                            €±. ÿπÿØÿ≥ ÿ±ÿß <input type="text" class="gap-input" data-answer="ÿ®ÿ¥Ÿà€å" placeholder="..."> (ÿ¥ÿ≥ÿ™ŸÜ) Ÿà ÿØÿ± ŸÇÿßÿ®ŸÑŸÖŸá <input type="text" class="gap-input" data-answer="ÿ®ÿ±€åÿ≤" placeholder="..."> (ÿ±€åÿÆÿ™ŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Gib zwei Tassen Wasser dazu und koche sie, bis sie halbgar sind.')">
                            €≤. ÿØŸà Ÿæ€åŸÖÿßŸÜŸá ÿ¢ÿ® <input type="text" class="gap-input" data-answer="ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ" placeholder="..."> (ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ) Ÿà <input type="text" class="gap-input" data-answer="ÿ®Ÿæÿ≤" placeholder="..."> (ŸæÿÆÿ™ŸÜ) ÿ™ÿß ÿπÿØÿ≥ ŸÜ€åŸÖ‚ÄåŸæÿ≤ ÿ¥ŸàÿØ.
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Wasch den Reis und weiche ihn in Wasser mit Salz ein.')">
                            €≥. ÿ®ÿ±ŸÜÿ¨ ÿ±ÿß <input type="text" class="gap-input" data-answer="ÿ®ÿ¥Ÿà€å" placeholder="..."> (ÿ¥ÿ≥ÿ™ŸÜ) Ÿà ÿØÿ± ÿ¢ÿ® Ÿà ŸÜŸÖ⁄© <input type="text" class="gap-input" data-answer="ÿ®ÿÆ€åÿ≥ÿßŸÜ" placeholder="..."> (ÿÆ€åÿ≥ÿßŸÜÿØŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Sch√§le die Zwiebel und hacke sie fein.')">
                            €¥. Ÿæ€åÿßÿ≤ ÿ±ÿß <input type="text" class="gap-input" data-answer="ŸæŸàÿ≥ÿ™ ÿ®⁄©ŸÜ" placeholder="..."> (ŸæŸàÿ≥ÿ™ ⁄©ŸÜÿØŸÜ) Ÿà ÿ±€åÿ≤ <input type="text" class="gap-input" data-answer="ÿÆŸèÿ±ÿØ ⁄©ŸÜ" placeholder="..."> (ÿÆŸèÿ±ÿØ ⁄©ÿ±ÿØŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Erhitze das √ñl in einer Pfanne und brate die Zwiebel, bis sie goldbraun ist.')">
                            €µ. ÿ±Ÿàÿ∫ŸÜ ÿ±ÿß ÿØÿ± ÿ™ÿßÿ®Ÿá <input type="text" class="gap-input" data-answer="⁄Øÿ±ŸÖ ⁄©ŸÜ" placeholder="..."> (⁄Øÿ±ŸÖ ⁄©ÿ±ÿØŸÜ) Ÿà Ÿæ€åÿßÿ≤ ÿ±ÿß <input type="text" class="gap-input" data-answer="ÿ≥ÿ±ÿÆ ⁄©ŸÜ" placeholder="..."> (ÿ≥ÿ±ÿÆ ⁄©ÿ±ÿØŸÜ) ÿ™ÿß ÿ∑ŸÑÿß€å€å ÿ¥ŸàÿØ.
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'F√ºg etwas Kurkuma und Pfeffer hinzu und r√ºhr um.')">
                            €∂. ⁄©ŸÖ€å ÿ≤ÿ±ÿØ⁄ÜŸàÿ®Ÿá Ÿà ŸÅŸÑŸÅŸÑ <input type="text" class="gap-input" data-answer="ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ" placeholder="..."> (ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ) Ÿà <input type="text" class="gap-input" data-answer="ŸáŸÖ ÿ®ÿ≤ŸÜ" placeholder="..."> (ŸáŸÖ ÿ≤ÿØŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Gib die Rosinen dazu und brate sie zwei Minuten mit der Zwiebel.')">
                            €∑. ⁄©ÿ¥ŸÖÿ¥ ÿ±ÿß <input type="text" class="gap-input" data-answer="ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ" placeholder="..."> (ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ) Ÿà ÿØŸà ÿØŸÇ€åŸÇŸá ÿ®ÿß Ÿæ€åÿßÿ≤ <input type="text" class="gap-input" data-answer="ÿ≥ÿ±ÿÆ ⁄©ŸÜ" placeholder="..."> (ÿ≥ÿ±ÿÆ ⁄©ÿ±ÿØŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Vermische in einem gro√üen Topf die Linsen mit dem Reis.')">
                            €∏. ÿØÿ± ŸÇÿßÿ®ŸÑŸÖŸáŸî ÿ®ÿ≤ÿ±⁄Øÿå ÿπÿØÿ≥ Ÿà ÿ®ÿ±ŸÜÿ¨ ÿ±ÿß ÿ®ÿß ŸáŸÖ <input type="text" class="gap-input" data-answer="ŸÖÿÆŸÑŸàÿ∑ ⁄©ŸÜ" placeholder="..."> (ŸÖÿÆŸÑŸàÿ∑ ⁄©ÿ±ÿØŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Gib Salz und Zimt dazu und r√ºhr leicht um.')">
                            €π. ŸÜŸÖ⁄© Ÿà ÿØÿßÿ±⁄Ü€åŸÜ <input type="text" class="gap-input" data-answer="ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ" placeholder="..."> (ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ) Ÿà ⁄©ŸÖ€å <input type="text" class="gap-input" data-answer="ŸáŸÖ ÿ®ÿ≤ŸÜ" placeholder="..."> (ŸáŸÖ ÿ≤ÿØŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Lass den Reis d√§mpfen und reduziere die Hitze.')">
                            €±€∞. ÿ®ÿ±ŸÜÿ¨ ÿ±ÿß <input type="text" class="gap-input" data-answer="ÿØŸÖ ÿ®⁄Øÿ∞ÿßÿ±" placeholder="..."> (ÿØŸÖ ⁄Øÿ∞ÿßÿ¥ÿ™ŸÜ) Ÿà ÿ≠ÿ±ÿßÿ±ÿ™ ÿ±ÿß ⁄©ŸÖ <input type="text" class="gap-input" data-answer="⁄©ŸÜ" placeholder="..."> (⁄©ÿ±ÿØŸÜ).
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Warte zwanzig Minuten, bis das Gericht ged√§mpft ist.')">
                            €±€±. ÿ®€åÿ≥ÿ™ ÿØŸÇ€åŸÇŸá <input type="text" class="gap-input" data-answer="ÿµÿ®ÿ± ⁄©ŸÜ" placeholder="..."> (ÿµÿ®ÿ± ⁄©ÿ±ÿØŸÜ) ÿ™ÿß ÿπÿØÿ≥‚ÄåŸæŸÑŸà ÿØŸÖ ÿ®⁄©ÿ¥ÿØ.
                        </div>
                        <div class="gap-sentence persian" onclick="showSentenceTranslation(this, 'Gib das Adas Polo auf einen Teller und garniere es mit gebratenen Zwiebeln und Rosinen.')">
                            €±€≤. ÿπÿØÿ≥‚ÄåŸæŸÑŸà ÿ±ÿß ÿØÿ± ÿ∏ÿ±ŸÅ <input type="text" class="gap-input" data-answer="ÿ®⁄©ÿ¥" placeholder="..."> (⁄©ÿ¥€åÿØŸÜ) Ÿà ÿ®ÿß Ÿæ€åÿßÿ≤ ÿØÿßÿ∫ Ÿà ⁄©ÿ¥ŸÖÿ¥ <input type="text" class="gap-input" data-answer="ÿ™ÿ≤€å€åŸÜ ⁄©ŸÜ" placeholder="..."> (ÿ™ÿ≤€å€åŸÜ ⁄©ÿ±ÿØŸÜ).
                        </div>
                    </div>

                    <button class="check-btn" onclick="checkAdasPoloAnswers()">Antworten √ºberpr√ºfen</button>
                </div>
            `;

            document.getElementById('adasPoloExercise').innerHTML = exerciseHTML;

            // Add click events to clickable words
            document.querySelectorAll('#adasPoloExercise .clickable-word').forEach(word => {
                word.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showTranslation(e, this.getAttribute('data-translation'));
                });
            });
        }

        function showSentenceTranslation(element, translation) {
            // Check if click was on input field
            if (event.target.tagName === 'INPUT') {
                return;
            }
            
            const existingPopup = element.querySelector('.sentence-translation');
            if (existingPopup) {
                existingPopup.remove();
            } else {
                const popup = document.createElement('div');
                popup.className = 'feedback-message success sentence-translation';
                popup.textContent = translation;
                popup.style.marginTop = '10px';
                popup.style.direction = 'ltr';
                element.appendChild(popup);

                setTimeout(() => {
                    popup.remove();
                }, 3000);
            }
        }

        function checkAdasPoloAnswers() {
            const inputs = document.querySelectorAll('#adasPoloExercise .gap-input');
            let correct = 0;
            let total = inputs.length;

            inputs.forEach(input => {
                const userAnswer = input.value.trim();
                const correctAnswer = input.getAttribute('data-answer');

                if (userAnswer === correctAnswer) {
                    input.classList.remove('wrong');
                    input.classList.add('correct');
                    correct++;
                } else {
                    input.classList.remove('correct');
                    input.classList.add('wrong');
                }
            });

            const message = document.createElement('div');
            message.className = correct === total ? 'feedback-message success' : 'feedback-message error';
            message.textContent = `${correct} von ${total} richtig! ${correct === total ? 'üéâ' : 'Versuch es nochmal! üí™'}`;
            
            const container = document.getElementById('adasPoloExercise');
            const existingMessage = container.querySelector('.feedback-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            container.insertBefore(message, container.lastElementChild);
        }

        // Gap Fill Functions
        function showGapFillPage(pageIndex) {
            const page = gapFillData[pageIndex];
            const progress = ((pageIndex + 1) / gapFillData.length) * 100;
            document.getElementById('gapProgress').style.width = progress + '%';

            let html = '<div style="margin-bottom: 20px; text-align: center; color: #667eea; font-weight: bold;">Seite ' + (pageIndex + 1) + ' von ' + gapFillData.length + '</div>';

            page.forEach((exercise, index) => {
                // Replace any sequence of dots or the ellipsis character with input field
                const persianWithInput = exercise.persian.replace(/[.‚Ä¶]+/g, '<input type="text" class="gap-input" data-answer="' + exercise.answer + '" id="gap_' + pageIndex + '_' + index + '">');
                
                html += `
                    <div class="gap-exercise">
                        <div class="gap-sentence">${exercise.german}</div>
                        <div class="gap-sentence persian">${persianWithInput}</div>
                        <div class="hint">Hinweis: ${exercise.hint}</div>
                    </div>
                `;
            });

            html += `
                <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
                    ${pageIndex > 0 ? '<button class="check-btn" onclick="prevGapPage()">‚¨Ö Vorherige Seite</button>' : ''}
                    <button class="check-btn" onclick="checkGapPage()">√úberpr√ºfen</button>
                    ${pageIndex < gapFillData.length - 1 ? '<button class="check-btn" onclick="nextGapPage()">N√§chste Seite ‚û°</button>' : '<button class="check-btn" onclick="goHome()">üè† Zur√ºck zum Men√º</button>'}
                </div>
            `;

            document.getElementById('gapFillContent').innerHTML = html;
        }

        function checkGapPage() {
            const page = gapFillData[currentGapPage];
            let correct = 0;

            page.forEach((exercise, index) => {
                const input = document.getElementById('gap_' + currentGapPage + '_' + index);
                const userAnswer = input.value.trim();
                const correctAnswer = exercise.answer;

                if (userAnswer === correctAnswer) {
                    input.classList.remove('wrong');
                    input.classList.add('correct');
                    correct++;
                } else {
                    input.classList.remove('correct');
                    input.classList.add('wrong');
                }
            });

            const message = document.createElement('div');
            message.className = correct === page.length ? 'feedback-message success' : 'feedback-message error';
            message.textContent = `${correct} von ${page.length} richtig! ${correct === page.length ? 'üéâ' : 'Versuch es nochmal! üí™'}`;
            
            const container = document.getElementById('gapFillContent');
            const existingMessage = container.querySelector('.feedback-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            container.insertBefore(message, container.firstChild);
        }

        function nextGapPage() {
            if (currentGapPage < gapFillData.length - 1) {
                currentGapPage++;
                showGapFillPage(currentGapPage);
            }
        }

        function prevGapPage() {
            if (currentGapPage > 0) {
                currentGapPage--;
                showGapFillPage(currentGapPage);
            }
        }

        // Sentence Construction Functions
        function showConstructionExercise(index) {
            const exercise = constructionData[index];
            const progress = ((index + 1) / constructionData.length) * 100;
            document.getElementById('constructionProgress').style.width = progress + '%';

            constructedSentence = [];

            // Combine words with distractors
            const allWords = [...exercise.words, ...exercise.distractors];
            // Shuffle array
            const shuffled = allWords.sort(() => Math.random() - 0.5);

            let html = `
                <div style="margin-bottom: 20px; text-align: center; color: #667eea; font-weight: bold;">
                    Aufgabe ${index + 1} von ${constructionData.length}
                </div>
                
                <div class="construction-area">
                    <div class="target-sentence">${exercise.german}</div>
                    
                    <div class="construction-box" id="constructionBox">
                        <span style="color: #999; font-style: italic;">Klicke auf die W√∂rter unten...</span>
                    </div>

                    <div class="word-bank" id="wordBank">
            `;

            shuffled.forEach((word, wordIndex) => {
                html += `<div class="word-tile" onclick="addWord('${word}', ${wordIndex})" id="tile_${wordIndex}">${word}</div>`;
            });

            html += `
                    </div>

                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
                        <button class="check-btn" onclick="clearConstruction()">üóëÔ∏è L√∂schen</button>
                        <button class="check-btn" onclick="checkConstruction()">‚úì √úberpr√ºfen</button>
                    </div>
                </div>
            `;

            document.getElementById('constructionContent').innerHTML = html;
        }

        function addWord(word, tileIndex) {
            constructedSentence.push(word);
            document.getElementById('tile_' + tileIndex).classList.add('used');
            updateConstructionBox();
        }

        function updateConstructionBox() {
            const box = document.getElementById('constructionBox');
            if (constructedSentence.length === 0) {
                box.innerHTML = '<span style="color: #999; font-style: italic;">Klicke auf die W√∂rter unten...</span>';
            } else {
                let html = '';
                constructedSentence.forEach((word, index) => {
                    html += `<div class="word-tile in-construction" onclick="removeWord(${index})">${word}</div>`;
                });
                box.innerHTML = html;
            }
        }

        function removeWord(index) {
            const word = constructedSentence[index];
            constructedSentence.splice(index, 1);
            
            // Re-enable the tile
            const tiles = document.querySelectorAll('.word-tile');
            tiles.forEach(tile => {
                if (tile.textContent === word && tile.classList.contains('used')) {
                    tile.classList.remove('used');
                }
            });

            updateConstructionBox();
        }

        function clearConstruction() {
            constructedSentence = [];
            document.querySelectorAll('.word-tile').forEach(tile => {
                tile.classList.remove('used');
            });
            updateConstructionBox();
        }

        function checkConstruction() {
            const exercise = constructionData[currentConstructionIndex];
            const correctWords = exercise.words;
            
            // Compare arrays directly instead of joined strings
            const isCorrect = constructedSentence.length === correctWords.length && 
                             constructedSentence.every((word, index) => word === correctWords[index]);

            const container = document.getElementById('constructionContent');
            const existingMessage = container.querySelector('.feedback-message');
            if (existingMessage) {
                existingMessage.remove();
            }

            if (isCorrect) {
                const message = document.createElement('div');
                message.className = 'feedback-message success';
                message.innerHTML = `
                    <div style="font-size: 1.5em; margin-bottom: 10px;">üéâ Richtig!</div>
                    <div style="direction: rtl;">${exercise.persian}</div>
                `;
                container.insertBefore(message, container.firstChild);

                setTimeout(() => {
                    if (currentConstructionIndex < constructionData.length - 1) {
                        currentConstructionIndex++;
                        showConstructionExercise(currentConstructionIndex);
                    } else {
                        showConstructionResults();
                    }
                }, 2000);
            } else {
                const userSentence = constructedSentence.join(' ');
                const message = document.createElement('div');
                message.className = 'feedback-message error';
                message.innerHTML = `
                    <div style="font-size: 1.5em; margin-bottom: 10px;">‚ùå Nicht ganz richtig</div>
                    <div><strong>Deine Antwort:</strong> <span style="direction: rtl; display: inline-block;">${userSentence}</span></div>
                    <div><strong>Richtig w√§re:</strong> <span style="direction: rtl; display: inline-block;">${exercise.persian}</span></div>
                    <div style="margin-top: 10px;">Versuch es nochmal! üí™</div>
                `;
                container.insertBefore(message, container.firstChild);
            }
        }

        function showConstructionResults() {
            document.getElementById('constructionContent').innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">üéâ</div>
                    <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Gl√ºckwunsch!</h2>
                    <p style="font-size: 1.3em; margin-bottom: 30px;">
                        Du hast alle Satzkonstruktionsaufgaben abgeschlossen!
                    </p>
                    <button class="next-btn" onclick="currentConstructionIndex = 0; showConstructionExercise(0)">üîÑ Nochmal √ºben</button>
                    <button class="next-btn" onclick="goHome()">üè† Zur√ºck zum Men√º</button>
                </div>
            `;
        }

        // Initialize on load
        window.onload = function() {
            // Any initialization code
        };
    </script>
</body>
</html>